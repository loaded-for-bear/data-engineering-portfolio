# 06. テキストログパース・異常検知

## 概要

アプリケーションサーバーの半構造化テキストログを正規表現でパースし、サーバー別・エンドポイント別のメトリクス集計と、1分間ウィンドウでの異常検知を行うETLパイプライン。

## 使用技術

- `re`（正規表現）: 名前付きグループによるログパース
- pandas: 時間帯集計、エラーレート計算
- 異常検知（エラー率 >= 50% の時間帯を検出）

## 入力データ

- `data/app_server.log` — アプリケーションログ（18行の正常ログ + 2行の不正ログ）

## 出力

- `server_metrics.csv` — サーバー別メトリクス（エラーレート、レスポンスタイム）
- `endpoint_report.csv` — エンドポイント別レポート（エラー数順）
- `anomaly_minutes.csv` — 異常検知結果（エラー率50%超の1分間ウィンドウ）

## 実行方法

```bash
python parse_log.py
```

## 処理内容

1. **Extract**: 正規表現でログの各フィールドを抽出、不正行をスキップ
2. **Transform**: 時間帯（分単位）の抽出、ステータスコードによるエラー判定
3. **Analyze**: サーバー別・エンドポイント別の集計、1分間ウィンドウでの異常検知
4. **Load**: 3種類のレポートCSVを出力
